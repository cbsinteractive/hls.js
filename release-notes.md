:robot: I have created a release *beep* *boop*
---


## 1.0.0 (2022-11-17)


###   BREAKING CHANGES

* Remove small/large gap config, always jump gaps (#4125)
* **config:** `manifest.dash.defaultPresentationDelay` has been replaced by `manifest.defaultPresentationDelay` (deprecated in v3.0.0)
* **config:** Configuration of factories should be plain factory functions, not constructors; these will not be invoked with `new` (deprecated in v3.1.0)
* **player:** `shaka.Player.prototype.addTextTrack()` has been replaced by `addTextTrackAsync()`, which returns a `Promise` (deprecated in v3.1.0)
* **ui:** `shaka.ui.TrackLabelFormat` has been renamed to `shaka.ui.Overlay.TrackLabelFormat` (deprecated in v3.1.0)
* **ui:** `shaka.ui.FailReasonCode` has been renamed to `shaka.ui.Overlay.FailReasonCode` (deprecated in v3.1.0)
* **offline:** `shaka.offline.Storage.prototype.store()` returns `AbortableOperation` instead of `Promise` (deprecated in v3.0.0)
* **offline:** `shaka.offline.Storage.prototype.getStoreInProgress()` has been removed; concurrent operations are supported, so callers don't need to check this (deprecated in v3.0.0)
* `shaka.util.Uint8ArrayUtils.equal` has been replaced by `shaka.util.BufferUtils.equal`, which can handle multiple types of buffers (deprecated in v3.0.0)
* **manifest:** `shaka.media.SegmentIndex.prototype.destroy()` has been replaced by `release()`, which is synchronous (deprecated in v3.0.0)
* **manifest:** `shaka.media.SegmentIterator.prototype.seek()`, which mutates the iterator, has been replaced by `shaka.media.SegmentIndex.getIteratorForTime()` (deprecated in v3.1.0)
* **manifest:** `shaka.media.SegmentIndex.prototype.merge()` has become private; use `mergeAndEvict()` instead (deprecated in v3.2.0)
* **plugin:** `AbrManager` plugins must implement the `playbackRateChanged()` method (deprecated in v3.0.0)
* **plugin:** `shaka.extern.Cue.prototype.spacer` has been replaced by the more clearly-named `lineBreak` (deprecated in v3.1.0)
* **plugin:** `IUIElement` plugins must have a `release()` method (not `destroy()`) (deprecated in v3.0.0)
* Remove deprecated features, update upgrade guides (#4089)
* Remove support for Safari 12 and iOS 12 (#4112)

### Features

* `shaka.util.Uint8ArrayUtils.equal` has been replaced by `shaka.util.BufferUtils.equal`, which can handle multiple types of buffers (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* Add a config to dispatch all emsg boxes. ([#3653](https://github.com/cbsinteractive/hls.js/issues/3653)) ([ea3568d](https://github.com/cbsinteractive/hls.js/commit/ea3568d7261237a571f23524012072008d01c1ae)), closes [#3348](https://github.com/cbsinteractive/hls.js/issues/3348)
* Add align and vertical settings to WebVttGenerator ([#3413](https://github.com/cbsinteractive/hls.js/issues/3413)) ([9ffc111](https://github.com/cbsinteractive/hls.js/commit/9ffc111c497f90028d0d1f2662aa9e7563c9694f))
* add Amazon Fire TV platform support ([#4375](https://github.com/cbsinteractive/hls.js/issues/4375)) ([5102dac](https://github.com/cbsinteractive/hls.js/commit/5102dac96cb1a749fefeb1f6b7a24c13f6b1077b))
* Add blob-url support ([#3583](https://github.com/cbsinteractive/hls.js/issues/3583)) ([6a03207](https://github.com/cbsinteractive/hls.js/commit/6a032078e934e6517516b225ab993f9e857ff5d2)), closes [#1481](https://github.com/cbsinteractive/hls.js/issues/1481)
* Add callback for apps to pre-process DASH manifests ([#3480](https://github.com/cbsinteractive/hls.js/issues/3480)) ([9afa4eb](https://github.com/cbsinteractive/hls.js/commit/9afa4eb20da67adb0dcb50f34e41f0ea9c109972)), closes [#3339](https://github.com/cbsinteractive/hls.js/issues/3339)
* Add chapters support ([#2972](https://github.com/cbsinteractive/hls.js/issues/2972)) ([160e36b](https://github.com/cbsinteractive/hls.js/commit/160e36be46b1af8ca4448d96f47e12cfac70c6aa))
* Add Common Media Client Data (CMCD) logging support ([#3662](https://github.com/cbsinteractive/hls.js/issues/3662)) ([221637a](https://github.com/cbsinteractive/hls.js/commit/221637a66c04d4fdc4767fea027c48a5601ac972)), closes [#3619](https://github.com/cbsinteractive/hls.js/issues/3619)
* Add fallback to TextDecoder and TextEncoder ([#4324](https://github.com/cbsinteractive/hls.js/issues/4324)) ([5b18069](https://github.com/cbsinteractive/hls.js/commit/5b180694309f1cc01b2997cd0366154135f8acd8))
* Add goToLive method ([#3527](https://github.com/cbsinteractive/hls.js/issues/3527)) ([84b9a89](https://github.com/cbsinteractive/hls.js/commit/84b9a89f045b195df3423f1bcd62a5dc40d42f98))
* Add Id to chapters ([#4184](https://github.com/cbsinteractive/hls.js/issues/4184)) ([5ca3271](https://github.com/cbsinteractive/hls.js/commit/5ca32712e375ba875be86827ea1efaaa5e3c0035))
* Add keySystemsMapping to drm config ([#4254](https://github.com/cbsinteractive/hls.js/issues/4254)) ([5e107d5](https://github.com/cbsinteractive/hls.js/commit/5e107d584f824e66ab3e5e07f9d833f6dc456d14)), closes [#4243](https://github.com/cbsinteractive/hls.js/issues/4243)
* add listenable events for playback stall detection and gap jumping ([#4249](https://github.com/cbsinteractive/hls.js/issues/4249)) ([5987458](https://github.com/cbsinteractive/hls.js/commit/5987458e445cf21f91bf4833396edd63d5f69765))
* Add media quality change events ([#3700](https://github.com/cbsinteractive/hls.js/issues/3700)) ([bd7b384](https://github.com/cbsinteractive/hls.js/commit/bd7b384c662b04ca4d9d083cc210ac7776a138a4)), closes [#3431](https://github.com/cbsinteractive/hls.js/issues/3431)
* add modern EME support for FairPlay ([#3776](https://github.com/cbsinteractive/hls.js/issues/3776)) ([6d76a13](https://github.com/cbsinteractive/hls.js/commit/6d76a135e5128dfd47653acea025d0a264d121d5))
* add new methods to FairPlayUtils ([#4029](https://github.com/cbsinteractive/hls.js/issues/4029)) ([f1eeac1](https://github.com/cbsinteractive/hls.js/commit/f1eeac1efb618aa7202b17b67c43056714f8da2f))
* add option for segment-relative VTT timings ([#4083](https://github.com/cbsinteractive/hls.js/issues/4083)) ([f382cc7](https://github.com/cbsinteractive/hls.js/commit/f382cc702be6cc28266fe61a33e43573cb22be57))
* Add public access to more drm members. ([1125184](https://github.com/cbsinteractive/hls.js/commit/1125184bfe08863677cb996b0f13d49e18eeade9))
* Add randomUUID polyfill ([#3669](https://github.com/cbsinteractive/hls.js/issues/3669)) ([a72adca](https://github.com/cbsinteractive/hls.js/commit/a72adca9fd62144f70da61314e785074f374427a))
* Add separate audio and video MIME types to Track API ([#3892](https://github.com/cbsinteractive/hls.js/issues/3892)) ([74c491d](https://github.com/cbsinteractive/hls.js/commit/74c491d2e0042f62385813f04e74517cf00fcade)), closes [#3888](https://github.com/cbsinteractive/hls.js/issues/3888)
* Add support for Modern EME and legacy Apple Media Keys for FairPlay ([#4309](https://github.com/cbsinteractive/hls.js/issues/4309)) ([5441f93](https://github.com/cbsinteractive/hls.js/commit/5441f932fd3da20f26da162cc0d49d0470689b41))
* Add support to HLS Image Media Playlists ([#3365](https://github.com/cbsinteractive/hls.js/issues/3365)) ([2a4083b](https://github.com/cbsinteractive/hls.js/commit/2a4083bab89bf683f58be73a0cba5e4c70cf8ae3)), closes [#2429](https://github.com/cbsinteractive/hls.js/issues/2429)
* Add support to text-shadow in VTT parser ([#4257](https://github.com/cbsinteractive/hls.js/issues/4257)) ([62bda2c](https://github.com/cbsinteractive/hls.js/commit/62bda2cd36c6d49d08c10757bfe5869b5be54b88))
* Adds advanced ABR config options ([#3706](https://github.com/cbsinteractive/hls.js/issues/3706)) ([d667e50](https://github.com/cbsinteractive/hls.js/commit/d667e50aa3a845ce48f818ac4c4118af88164656)), closes [#3422](https://github.com/cbsinteractive/hls.js/issues/3422)
* **ads:** Integrate with non-linear IMA CS ads ([#3639](https://github.com/cbsinteractive/hls.js/issues/3639)) ([9c3bed3](https://github.com/cbsinteractive/hls.js/commit/9c3bed3d601d27c6df27a1e6946a49c86e4f3db4)), closes [#2596](https://github.com/cbsinteractive/hls.js/issues/2596)
* Allow WebP and AVIF image streams ([#3856](https://github.com/cbsinteractive/hls.js/issues/3856)) ([9f3fb46](https://github.com/cbsinteractive/hls.js/commit/9f3fb46d371d52f58bc9a7fc5beefe51890879ed)), closes [#3845](https://github.com/cbsinteractive/hls.js/issues/3845)
* **ARIA:** Add polyfill for ARIAMixin. ([cf2fb90](https://github.com/cbsinteractive/hls.js/commit/cf2fb903cb802cb89c010b60ea4594cc0f40e1b0)), closes [#3378](https://github.com/cbsinteractive/hls.js/issues/3378)
* Automatic ABR quality restrictions based on size ([#4404](https://github.com/cbsinteractive/hls.js/issues/4404)) ([cfe8af5](https://github.com/cbsinteractive/hls.js/commit/cfe8af5ff928fe7466b103429a6325917579ce70)), closes [#2333](https://github.com/cbsinteractive/hls.js/issues/2333)
* **cast:** Add Android receiver support ([#4183](https://github.com/cbsinteractive/hls.js/issues/4183)) ([dbba571](https://github.com/cbsinteractive/hls.js/commit/dbba571c6bb7e99a99469ffb695f59a590d44118))
* **CodecPreference:** Add preferred codecs config ([9a706ef](https://github.com/cbsinteractive/hls.js/commit/9a706ef90e7829f51edebc6a521b08f800c3ab2b)), closes [#2179](https://github.com/cbsinteractive/hls.js/issues/2179)
* **CodecPreference:** Improve preferredVideoCodecs & preferredAudioCodecs ([#3424](https://github.com/cbsinteractive/hls.js/issues/3424)) ([0579ee7](https://github.com/cbsinteractive/hls.js/commit/0579ee77797548c2e91622ef87a6a9b778437c25))
* **config:** `manifest.dash.defaultPresentationDelay` has been replaced by `manifest.defaultPresentationDelay` (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **config:** Configuration of factories should be plain factory functions, not constructors; these will not be invoked with `new` (deprecated in v3.1.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **dash:** Construct ClearKey PSSH based on MPD ContentProtection ([#4104](https://github.com/cbsinteractive/hls.js/issues/4104)) ([b83b412](https://github.com/cbsinteractive/hls.js/commit/b83b4120f46ae94e3ce194f43b13517b7a736f07))
* **dash:** Create segment index only when used ([b16d30c](https://github.com/cbsinteractive/hls.js/commit/b16d30c249586ae569fc9d632e3be593cb095ed8))
* **dash:** Parse ClearKey license URL in MPD ([#4066](https://github.com/cbsinteractive/hls.js/issues/4066)) ([19e24b1](https://github.com/cbsinteractive/hls.js/commit/19e24b1d741b4ba6946011748be8b759b4b71773))
* **demo:** Add Apple Advanced HLS Stream (TS) with raw AAC ([#3933](https://github.com/cbsinteractive/hls.js/issues/3933)) ([1becadf](https://github.com/cbsinteractive/hls.js/commit/1becadfc93ca06d64d0c9ace37c80213268a1675))
* **demo:** Added demo asset with raw AAC. ([014c7b3](https://github.com/cbsinteractive/hls.js/commit/014c7b302b292a22f62d4e01230b927b33bc51da)), closes [#2337](https://github.com/cbsinteractive/hls.js/issues/2337)
* **DRM:** add drmInfo to license requests ([#4030](https://github.com/cbsinteractive/hls.js/issues/4030)) ([abe846e](https://github.com/cbsinteractive/hls.js/commit/abe846e1a3456b029822ea42eb0520dec547fda6))
* **DRM:** add initData and initDataType to license requests ([#4039](https://github.com/cbsinteractive/hls.js/issues/4039)) ([bdc5ea7](https://github.com/cbsinteractive/hls.js/commit/bdc5ea767ebe55bb0b18dd106e269ab3fecd6d00))
* Export LanguageUtils ([5783694](https://github.com/cbsinteractive/hls.js/commit/57836942c6e5bc93d37dd9ee6342ac586150f844)), closes [#3692](https://github.com/cbsinteractive/hls.js/issues/3692)
* **hls:** Add support for EXT-X-GAP ([#4208](https://github.com/cbsinteractive/hls.js/issues/4208)) ([14e61a7](https://github.com/cbsinteractive/hls.js/commit/14e61a7368ddbd66c4b10f3b0475840cc50512bd)), closes [#1308](https://github.com/cbsinteractive/hls.js/issues/1308)
* **HLS:** Containerless format support ([36d0b54](https://github.com/cbsinteractive/hls.js/commit/36d0b5484fad68dc1d640fbddf2fae3e1eb7169b)), closes [#2337](https://github.com/cbsinteractive/hls.js/issues/2337)
* **hls:** make a head request if hls subtitles have no extension ([#4140](https://github.com/cbsinteractive/hls.js/issues/4140)) ([19e12b5](https://github.com/cbsinteractive/hls.js/commit/19e12b5e282e661a9a17a6bfbb87c565faf2bc6e))
* **hls:** Make default HLS audio/video codecs configurable ([#3651](https://github.com/cbsinteractive/hls.js/issues/3651)) ([52d68a2](https://github.com/cbsinteractive/hls.js/commit/52d68a29c86ec5696bfaf36abb5ba055f29180f8))
* **hls:** parse EXT-X-GAP ([#4134](https://github.com/cbsinteractive/hls.js/issues/4134)) ([42eecc8](https://github.com/cbsinteractive/hls.js/commit/42eecc84f992ca6a680c3a5fd46d1c300fe92a72))
* **HLS:** Re-add TS support to Safari ([#4097](https://github.com/cbsinteractive/hls.js/issues/4097)) ([8a3bed7](https://github.com/cbsinteractive/hls.js/commit/8a3bed710c104c9729fec2072318e50f9fe15ab2))
* **hls:** Read EXT-X-PROGRAM-DATE-TIME ([#4034](https://github.com/cbsinteractive/hls.js/issues/4034)) ([89409ce](https://github.com/cbsinteractive/hls.js/commit/89409cee3eaeb6764dbc191b7408bf45eecdced3)), closes [#2337](https://github.com/cbsinteractive/hls.js/issues/2337)
* **hls:** Support AES-128 in HLS ([#4386](https://github.com/cbsinteractive/hls.js/issues/4386)) ([6194021](https://github.com/cbsinteractive/hls.js/commit/6194021a3d4ea5dae22ade6713bb077875a4ee9d)), closes [#850](https://github.com/cbsinteractive/hls.js/issues/850)
* Improve gap-detection robustness ([#4399](https://github.com/cbsinteractive/hls.js/issues/4399)) ([4293a14](https://github.com/cbsinteractive/hls.js/commit/4293a1421ada4b189d64b8c3f87a7599bc7b1a8f))
* **manifest:** `shaka.media.SegmentIndex.prototype.destroy()` has been replaced by `release()`, which is synchronous (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **manifest:** `shaka.media.SegmentIndex.prototype.merge()` has become private; use `mergeAndEvict()` instead (deprecated in v3.2.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **manifest:** `shaka.media.SegmentIterator.prototype.seek()`, which mutates the iterator, has been replaced by `shaka.media.SegmentIndex.getIteratorForTime()` (deprecated in v3.1.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **MediaCap:** Add preferredDecodingAttributes config ([79d5fd8](https://github.com/cbsinteractive/hls.js/commit/79d5fd8ca0a7c5f3738d539aec226395dc10b83e)), closes [#1391](https://github.com/cbsinteractive/hls.js/issues/1391)
* **net:** Add response HTTP status to Networking engine responses ([#3641](https://github.com/cbsinteractive/hls.js/issues/3641)) ([2701527](https://github.com/cbsinteractive/hls.js/commit/27015278cd905631c9c4edbc164c8639f5d90c61)), closes [#3640](https://github.com/cbsinteractive/hls.js/issues/3640)
* **offline:** `shaka.offline.Storage.prototype.getStoreInProgress()` has been removed; concurrent operations are supported, so callers don't need to check this (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **offline:** `shaka.offline.Storage.prototype.store()` returns `AbortableOperation` instead of `Promise` (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **offline:** Changed store order of operations. ([5215f53](https://github.com/cbsinteractive/hls.js/commit/5215f5319fef03b2b4881845dd50a06f1c4be8af)), closes [#879](https://github.com/cbsinteractive/hls.js/issues/879)
* **offline:** improve the speed of offline downloads ([#4168](https://github.com/cbsinteractive/hls.js/issues/4168)) ([73f6de3](https://github.com/cbsinteractive/hls.js/commit/73f6de3e01ae4ed3b86302add7ee16c86c3b9b78))
* **offline:** Load init segments first for keys ([db8ad31](https://github.com/cbsinteractive/hls.js/commit/db8ad31bfbe1c2b9a372daad893d900e77d5e484)), closes [#879](https://github.com/cbsinteractive/hls.js/issues/879)
* **offline:** Make segment storage stateless. ([aded252](https://github.com/cbsinteractive/hls.js/commit/aded252e40445f4c65565932fb400b35d9a18e59)), closes [#879](https://github.com/cbsinteractive/hls.js/issues/879)
* only polyfill MCap for non Android-based Cast devices. ([#4170](https://github.com/cbsinteractive/hls.js/issues/4170)) ([11321d8](https://github.com/cbsinteractive/hls.js/commit/11321d8f26b01412fa5173aa6efcf777186fa7a0))
* **player:** `shaka.Player.prototype.addTextTrack()` has been replaced by `addTextTrackAsync()`, which returns a `Promise` (deprecated in v3.1.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **player:** Add updateStartTime method to play ([#3491](https://github.com/cbsinteractive/hls.js/issues/3491)) ([16c1810](https://github.com/cbsinteractive/hls.js/commit/16c1810b0321724b0daa44cf7f4736b0b0983153))
* **player:** Added events for download lifecycle. ([7893b77](https://github.com/cbsinteractive/hls.js/commit/7893b7733b7190e820dea28c6ea1bb4629ca1d88)), closes [#3533](https://github.com/cbsinteractive/hls.js/issues/3533)
* **plugin:** `AbrManager` plugins must implement the `playbackRateChanged()` method (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **plugin:** `IUIElement` plugins must have a `release()` method (not `destroy()`) (deprecated in v3.0.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **plugin:** `shaka.extern.Cue.prototype.spacer` has been replaced by the more clearly-named `lineBreak` (deprecated in v3.1.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* Public release of Sindarin (sjn) translation easter egg ([#4033](https://github.com/cbsinteractive/hls.js/issues/4033)) ([9029d06](https://github.com/cbsinteractive/hls.js/commit/9029d0677e0e0325e0dbe939907ba60ecec74c92))
* Remove deprecated features, update upgrade guides ([#4089](https://github.com/cbsinteractive/hls.js/issues/4089)) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* Remove small/large gap config, always jump gaps ([#4125](https://github.com/cbsinteractive/hls.js/issues/4125)) ([0fd1999](https://github.com/cbsinteractive/hls.js/commit/0fd19997dde7b03bad7464a82dc86d7b2cd8a304))
* Remove support for Safari 12 and iOS 12 ([#4112](https://github.com/cbsinteractive/hls.js/issues/4112)) ([8bb7044](https://github.com/cbsinteractive/hls.js/commit/8bb70449d33c31a0e7fc312260dc001cc9e3a792))
* Support frequent updates during streaming ([#3483](https://github.com/cbsinteractive/hls.js/issues/3483)) ([6e69bed](https://github.com/cbsinteractive/hls.js/commit/6e69bed0160fcf61c8f42d7600147824e8453299)), closes [#3332](https://github.com/cbsinteractive/hls.js/issues/3332)
* Temporarily disable the active variant from NETWORK HTTP_ERROR ([#4189](https://github.com/cbsinteractive/hls.js/issues/4189)) ([b57279d](https://github.com/cbsinteractive/hls.js/commit/b57279d39c24d3b2568c4b62338524ecc23423ad)), closes [#4121](https://github.com/cbsinteractive/hls.js/issues/4121) [#1542](https://github.com/cbsinteractive/hls.js/issues/1542)
* **text:** Partially support tts:textOutline ([911ce6d](https://github.com/cbsinteractive/hls.js/commit/911ce6d25037bdc3981cbeda93f74e596acafc0f)), closes [#3612](https://github.com/cbsinteractive/hls.js/issues/3612)
* **ui:** `shaka.ui.FailReasonCode` has been renamed to `shaka.ui.Overlay.FailReasonCode` (deprecated in v3.1.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **ui:** `shaka.ui.TrackLabelFormat` has been renamed to `shaka.ui.Overlay.TrackLabelFormat` (deprecated in v3.1.0) ([ac5acc8](https://github.com/cbsinteractive/hls.js/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **ui:** Add configurable rates ([#3579](https://github.com/cbsinteractive/hls.js/issues/3579)) ([f65b093](https://github.com/cbsinteractive/hls.js/commit/f65b093d40f1c1f0d4e5e8e47fcc128ff3ca74ea)), closes [#3443](https://github.com/cbsinteractive/hls.js/issues/3443)
* **ui:** Add quality selection for audio-only content ([#3649](https://github.com/cbsinteractive/hls.js/issues/3649)) ([adc3502](https://github.com/cbsinteractive/hls.js/commit/adc3502d55f39eaca30f3c42e17961ec7d681c80)), closes [#2071](https://github.com/cbsinteractive/hls.js/issues/2071)
* **ui:** Add Quality, Language, Playback, Captions buttons to control panel ([#3465](https://github.com/cbsinteractive/hls.js/issues/3465)) ([481b378](https://github.com/cbsinteractive/hls.js/commit/481b378a4bb249fb13c6a2f9916e38c859fcbe3f))
* **ui:** Add right-click context menu, statistics button ([#3548](https://github.com/cbsinteractive/hls.js/issues/3548)) ([afb9310](https://github.com/cbsinteractive/hls.js/commit/afb93106a71ce0868edba3159a84e889ee0694ad)), closes [#2607](https://github.com/cbsinteractive/hls.js/issues/2607)
* **ui:** Add tooltips to control panel buttons ([#3572](https://github.com/cbsinteractive/hls.js/issues/3572)) ([d5769ee](https://github.com/cbsinteractive/hls.js/commit/d5769eeda47524998a714a3d701604561d761b6d)), closes [#3269](https://github.com/cbsinteractive/hls.js/issues/3269)
* **UI:** Add video fullscreen support for iOS ([#3853](https://github.com/cbsinteractive/hls.js/issues/3853)) ([8d1b5e6](https://github.com/cbsinteractive/hls.js/commit/8d1b5e6b07e979bd641da0b2b53c5f8e872422ad)), closes [#3832](https://github.com/cbsinteractive/hls.js/issues/3832)
* **UI:** Added keyboardSeekDistance config to UI ([#4246](https://github.com/cbsinteractive/hls.js/issues/4246)) ([6084ca6](https://github.com/cbsinteractive/hls.js/commit/6084ca6395fbe3d5a97fa92137b8bb51f15c89f8))
* **ui:** Added Loop and PIP to context menu, and Statistics to overflow menu ([#3578](https://github.com/cbsinteractive/hls.js/issues/3578)) ([34958c8](https://github.com/cbsinteractive/hls.js/commit/34958c81b934bb3d6c9bb4f671be7305430ff9ab))
* **UI:** Adds singleClickForPlayAndPause config ([8aacdcf](https://github.com/cbsinteractive/hls.js/commit/8aacdcf76ca80f5927205995584fb9e8d1cf774d)), closes [#3821](https://github.com/cbsinteractive/hls.js/issues/3821)
* **UI:** Exit PiP when destroying UI ([38cfc23](https://github.com/cbsinteractive/hls.js/commit/38cfc230483133862cc41153931f4dc170eb4a75)), closes [#3553](https://github.com/cbsinteractive/hls.js/issues/3553)
* Upgrade eme-encryption-scheme-polyfill to support ChromeCast version of PlayReady ([#4378](https://github.com/cbsinteractive/hls.js/issues/4378)) ([e6b6d7c](https://github.com/cbsinteractive/hls.js/commit/e6b6d7c24bee4138b6bb2735e3c9a4dc885a6cf6))
* **webvtt:** add support for karaoke style text in WebVTT ([#4274](https://github.com/cbsinteractive/hls.js/issues/4274)) ([60af516](https://github.com/cbsinteractive/hls.js/commit/60af5165207d39ebe26d536b009521192ab8cad9))


### Bug Fixes

* 3783 captions not working after a period transition on live DASH streams ([#3801](https://github.com/cbsinteractive/hls.js/issues/3801)) ([6e0737e](https://github.com/cbsinteractive/hls.js/commit/6e0737ec25c14a1566cbb1dd8662ed6abf527670)), closes [#3783](https://github.com/cbsinteractive/hls.js/issues/3783)
* **abr:** use Network Info API in ABR getBandwidthEstimate ([#4263](https://github.com/cbsinteractive/hls.js/issues/4263)) ([4fc7a48](https://github.com/cbsinteractive/hls.js/commit/4fc7a4893fd081d4dafa26a2034361afd7b7e6ed))
* Account for server-side ad cue points in external text tracks. ([#3617](https://github.com/cbsinteractive/hls.js/issues/3617)) ([a7f4db7](https://github.com/cbsinteractive/hls.js/commit/a7f4db7f185a77424db1283ec51af742cddf97cf))
* Add DASH MIME type mapping for src= playback ([#3805](https://github.com/cbsinteractive/hls.js/issues/3805)) ([3a9139e](https://github.com/cbsinteractive/hls.js/commit/3a9139e21274708ac56c9b1175892db54e25be73))
* Add explicit release() for FakeEventTarget ([#3950](https://github.com/cbsinteractive/hls.js/issues/3950)) ([f1c1585](https://github.com/cbsinteractive/hls.js/commit/f1c1585afb2cfa3eb6b7465c8b32c9bad8e62d15))
* add strictMissingProperties suppressions to unblock strict missing properties on union types. ([#4371](https://github.com/cbsinteractive/hls.js/issues/4371)) ([b361948](https://github.com/cbsinteractive/hls.js/commit/b36194878e26a22b522a6cf1dba07e9fc5cd341d))
* Add support to file type in mediaCapabilities implementation ([#3570](https://github.com/cbsinteractive/hls.js/issues/3570)) ([233c2bf](https://github.com/cbsinteractive/hls.js/commit/233c2bf4d8f1f73401d33dddb38e214ebda449e6)), closes [#3530](https://github.com/cbsinteractive/hls.js/issues/3530)
* Add support to file type in MediaCapabilities polyfill ([#3569](https://github.com/cbsinteractive/hls.js/issues/3569)) ([c07d1a3](https://github.com/cbsinteractive/hls.js/commit/c07d1a3e09a2856a6738357b1dff1b16eead8c0c)), closes [#3530](https://github.com/cbsinteractive/hls.js/issues/3530)
* Add Support to iOS 12 in MediaCapabilities polyfill ([#3573](https://github.com/cbsinteractive/hls.js/issues/3573)) ([ef506ac](https://github.com/cbsinteractive/hls.js/commit/ef506ac647cc6134a8b187fe82824eaa065f8bb7))
* **ads:** Add ResizeObserver to CS ad manager. ([#3652](https://github.com/cbsinteractive/hls.js/issues/3652)) ([2bdc326](https://github.com/cbsinteractive/hls.js/commit/2bdc326ed648df4855faf6a0add815356cdeab7e)), closes [#3638](https://github.com/cbsinteractive/hls.js/issues/3638)
* **ads:** Dispose of ad manager on player detach ([7b2a172](https://github.com/cbsinteractive/hls.js/commit/7b2a17276b495c7961fac1fdcbf944b613c542d1))
* **ads:** Fix IMA crash when autoplay is rejected ([#4518](https://github.com/cbsinteractive/hls.js/issues/4518)) ([871a3c0](https://github.com/cbsinteractive/hls.js/commit/871a3c0315a2965c91ebdde9815c7f6c5e0a59de)), closes [#4179](https://github.com/cbsinteractive/hls.js/issues/4179)
* **ads:** Fix stopping of Server Side Ad manager ([#3611](https://github.com/cbsinteractive/hls.js/issues/3611)) ([a17c988](https://github.com/cbsinteractive/hls.js/commit/a17c98800415bec92ce3c8d2e352c4e363e0050c))
* allow build without text ([#4506](https://github.com/cbsinteractive/hls.js/issues/4506)) ([7e93720](https://github.com/cbsinteractive/hls.js/commit/7e9372097567d8d0f93c04e241fb917945da05bf))
* Allow muxjs to be loaded after Shaka ([65a2cfd](https://github.com/cbsinteractive/hls.js/commit/65a2cfdda98b913c6f5b802a299cabd7477f3d49)), closes [#3407](https://github.com/cbsinteractive/hls.js/issues/3407)
* Allow overriding special handling of 404s ([#4635](https://github.com/cbsinteractive/hls.js/issues/4635)) ([bf3e4e8](https://github.com/cbsinteractive/hls.js/commit/bf3e4e8967ab938c95861d3f02eb1bcf76722a5c)), closes [#4548](https://github.com/cbsinteractive/hls.js/issues/4548)
* allow the playback on platforms when low latency APIs are not supported ([#4485](https://github.com/cbsinteractive/hls.js/issues/4485)) ([cf8c857](https://github.com/cbsinteractive/hls.js/commit/cf8c857e58f041e24373e8b4f7d560287197cf13))
* Always polyfill MediaCapabilities for Apple browsers ([#3588](https://github.com/cbsinteractive/hls.js/issues/3588)) ([4dce1e0](https://github.com/cbsinteractive/hls.js/commit/4dce1e0ba5988e21dbf70490ae32819fe6433632))
* Avoid seeking on src when start time is 0 ([#3644](https://github.com/cbsinteractive/hls.js/issues/3644)) ([3f822d8](https://github.com/cbsinteractive/hls.js/commit/3f822d81221ff7c4d2ee2487b0eca5c4791d7059)), closes [#3518](https://github.com/cbsinteractive/hls.js/issues/3518)
* Avoid WebCrypto randomUUID when CMCD disabled ([4731c76](https://github.com/cbsinteractive/hls.js/commit/4731c7677f4f179f19ae647d3bb1edfda40dac53))
* **cast:** Make cast tests more forgiving. ([4fee1de](https://github.com/cbsinteractive/hls.js/commit/4fee1de967e782e532e0ddd791df0bcca14c557c))
* **cast:** Reduce size of Cast update messages ([#4644](https://github.com/cbsinteractive/hls.js/issues/4644)) ([2ee9803](https://github.com/cbsinteractive/hls.js/commit/2ee9803f295bbdf7911740c4b5f35b81e8a7488c))
* **cea:** Fix BUFFER_READ_OUT_OF_BOUNDS error when CEA caption packets are empty ([#3609](https://github.com/cbsinteractive/hls.js/issues/3609)) ([97ba4df](https://github.com/cbsinteractive/hls.js/commit/97ba4dfd7bdcbf1b612af3679ee85273a1967715)), closes [#3608](https://github.com/cbsinteractive/hls.js/issues/3608)
* **cea:** make a more robust CEA MP4 parser ([#3965](https://github.com/cbsinteractive/hls.js/issues/3965)) ([2687b95](https://github.com/cbsinteractive/hls.js/commit/2687b95d5830179c53914a7e903ecfbaced429cc))
* check for negative rows before moving ([#4510](https://github.com/cbsinteractive/hls.js/issues/4510)) ([23f39d7](https://github.com/cbsinteractive/hls.js/commit/23f39d7393c771440fc76ac9016b166d658710b2)), closes [#4508](https://github.com/cbsinteractive/hls.js/issues/4508)
* Clear buffer on seek if mediaState is updating ([#3795](https://github.com/cbsinteractive/hls.js/issues/3795)) ([9705639](https://github.com/cbsinteractive/hls.js/commit/9705639f4514d8d2dbfe5d81a31388f99e6be507)), closes [#3299](https://github.com/cbsinteractive/hls.js/issues/3299)
* **cmcd:** Fix Symbol usage in CMCD on Xbox One ([#4073](https://github.com/cbsinteractive/hls.js/issues/4073)) ([4005754](https://github.com/cbsinteractive/hls.js/commit/400575498f34cf252aaba0bc1367953b8cf44537)), closes [#4072](https://github.com/cbsinteractive/hls.js/issues/4072)
* Content reload starttime with HLS on iOS ([#4575](https://github.com/cbsinteractive/hls.js/issues/4575)) ([f02e25a](https://github.com/cbsinteractive/hls.js/commit/f02e25af91eeb18939f16460702b8f9ec226b54c)), closes [#4244](https://github.com/cbsinteractive/hls.js/issues/4244)
* **css:** Fix missing % in calculation ([#4157](https://github.com/cbsinteractive/hls.js/issues/4157)) ([1c86195](https://github.com/cbsinteractive/hls.js/commit/1c8619582319c46c524807aa4bdff1191b2efc91))
* **dash:** Account for bandwidth before filtering text stream ([#3765](https://github.com/cbsinteractive/hls.js/issues/3765)) ([0b04aec](https://github.com/cbsinteractive/hls.js/commit/0b04aecdd7ad4184a72b8cf562318b28128344bf)), closes [#3724](https://github.com/cbsinteractive/hls.js/issues/3724)
* **dash:** Fix performance regression ([#4064](https://github.com/cbsinteractive/hls.js/issues/4064)) ([298b604](https://github.com/cbsinteractive/hls.js/commit/298b60481d34bd9d776874fe1b9a8eea05b533d9))
* **dash:** Fix playback of Dolby Atmos ([#4173](https://github.com/cbsinteractive/hls.js/issues/4173)) ([d51fe23](https://github.com/cbsinteractive/hls.js/commit/d51fe23b7fab99501818c18cc76586e1ec4abcdd)), closes [#4171](https://github.com/cbsinteractive/hls.js/issues/4171)
* **dash:** Notify segments on all updates. ([b8b72a9](https://github.com/cbsinteractive/hls.js/commit/b8b72a900d155ef085e72e62b5da697d67990c04)), closes [#3675](https://github.com/cbsinteractive/hls.js/issues/3675)
* **DASH:** Support "forced-subtitle" role ([#3807](https://github.com/cbsinteractive/hls.js/issues/3807)) ([f767260](https://github.com/cbsinteractive/hls.js/commit/f767260dcc96787b2ceda7548ddd95210e8130e2)), closes [#3767](https://github.com/cbsinteractive/hls.js/issues/3767)
* Debug buffer placement ([#4345](https://github.com/cbsinteractive/hls.js/issues/4345)) ([47fa309](https://github.com/cbsinteractive/hls.js/commit/47fa3093e1462d0bcca87238dc4886b9e2c1f8f4))
* Dedupe DRM init data ([#3695](https://github.com/cbsinteractive/hls.js/issues/3695)) ([a09d8c9](https://github.com/cbsinteractive/hls.js/commit/a09d8c9869d5246af540d562f36546a294c2d9e9))
* **demo:** allow switch between UITextDisplayer and SimpleTextDisplayer ([#4275](https://github.com/cbsinteractive/hls.js/issues/4275)) ([28689f3](https://github.com/cbsinteractive/hls.js/commit/28689f38fb7cc8f3b85b6b1eb2337a1779e8ee95))
* **demo:** erroneous FairPlay keysystem in demo ([#4276](https://github.com/cbsinteractive/hls.js/issues/4276)) ([8719bdc](https://github.com/cbsinteractive/hls.js/commit/8719bdc0defd7956ec9fad934525477a603744a0))
* **demo:** Fix 'Tears of Steel (live, DASH, Server Side ads)' ([#3758](https://github.com/cbsinteractive/hls.js/issues/3758)) ([fb90679](https://github.com/cbsinteractive/hls.js/commit/fb906798199d10f6deb5b0406d6248d57a781c83))
* **demo:** Fix default demo index versions ([#4116](https://github.com/cbsinteractive/hls.js/issues/4116)) ([fe8b9ab](https://github.com/cbsinteractive/hls.js/commit/fe8b9ab2c155c53f95c6a360c273fb71927cb290))
* Discard only invalid overlapping periods ([1c64e20](https://github.com/cbsinteractive/hls.js/commit/1c64e209097714e88956f4053d037dc7060813b9))
* Discard only invalid periods ([94d696f](https://github.com/cbsinteractive/hls.js/commit/94d696fd042c39450712f87c02735e8faa49138a))
* Display captions with forward slashes ([#3556](https://github.com/cbsinteractive/hls.js/issues/3556)) ([65e9d8f](https://github.com/cbsinteractive/hls.js/commit/65e9d8ff85815d9f3226a8df091053d747be7294))
* Do not report MANIFEST RESTRICTIONS_CANNOT_BE_MET error twice ([#4194](https://github.com/cbsinteractive/hls.js/issues/4194)) ([08589e8](https://github.com/cbsinteractive/hls.js/commit/08589e8fb27f3f73f64204e7d3a2387f3c197d84)), closes [#4190](https://github.com/cbsinteractive/hls.js/issues/4190)
* Don't destroy ad manager on detach ([#3665](https://github.com/cbsinteractive/hls.js/issues/3665)) ([684dd85](https://github.com/cbsinteractive/hls.js/commit/684dd852164ce94bfdf85d0d8ab2cc1390cdbeba))
* Don't force update captions by default ([#3425](https://github.com/cbsinteractive/hls.js/issues/3425)) ([a0d3e52](https://github.com/cbsinteractive/hls.js/commit/a0d3e528de04f1b0fe5a33ffcb7844e1414f1b5e))
* Don't forget active track after new period is added to live stream. ([22307d0](https://github.com/cbsinteractive/hls.js/commit/22307d0ac11c005a7686616365100df01a5ec407)), closes [#3510](https://github.com/cbsinteractive/hls.js/issues/3510)
* Don't gap jump at start of video if autoplay is not set ([#3645](https://github.com/cbsinteractive/hls.js/issues/3645)) ([9e15323](https://github.com/cbsinteractive/hls.js/commit/9e153231e7fb021185bfeb6ce123a3992625a9f2)), closes [#3451](https://github.com/cbsinteractive/hls.js/issues/3451)
* Don't send drmsessionupdate after unload ([#4248](https://github.com/cbsinteractive/hls.js/issues/4248)) ([60af9ad](https://github.com/cbsinteractive/hls.js/commit/60af9ad596e5c2cb31d1e7bb616e415cf46ca761))
* embed cc not shown when seeking back ([#4643](https://github.com/cbsinteractive/hls.js/issues/4643)) ([3743fe8](https://github.com/cbsinteractive/hls.js/commit/3743fe8ab70ce8bebd46ff4a667ddce188ec49c6)), closes [#4641](https://github.com/cbsinteractive/hls.js/issues/4641)
* Enforce string-format of event data keys. ([dd3748d](https://github.com/cbsinteractive/hls.js/commit/dd3748d59970de46255cd6d8b4204ee501600655)), closes [#3710](https://github.com/cbsinteractive/hls.js/issues/3710)
* Enhanced fix for geo-redundancy ([5f77d2b](https://github.com/cbsinteractive/hls.js/commit/5f77d2b8f19787ccdf8639ad0a8991824788247f))
* exception if on early adError ([#4362](https://github.com/cbsinteractive/hls.js/issues/4362)) ([3c92f05](https://github.com/cbsinteractive/hls.js/commit/3c92f0598e6c1628ff50d980a842dd40b2b56813)), closes [#4004](https://github.com/cbsinteractive/hls.js/issues/4004)
* Export d ts as a module ([#4163](https://github.com/cbsinteractive/hls.js/issues/4163)) ([feefd7b](https://github.com/cbsinteractive/hls.js/commit/feefd7b7d1cc318800c8d83de8cce81c57939f7d))
* Failover in geo-redundant streams ([930c158](https://github.com/cbsinteractive/hls.js/commit/930c158629d352b1e5186b5ad0eeb370e95c7aaa))
* FairPlay playback ([#3531](https://github.com/cbsinteractive/hls.js/issues/3531)) ([3995000](https://github.com/cbsinteractive/hls.js/commit/3995000abcbb29e3b1228397868e13e6c34e34a7))
* **fairplay:** Re-add initDataTransform config ([#4231](https://github.com/cbsinteractive/hls.js/issues/4231)) ([ff310e9](https://github.com/cbsinteractive/hls.js/commit/ff310e91e564bcc4be340c47bf1be81a5323765a))
* Filter unsupported H.264 streams in Xbox ([#3411](https://github.com/cbsinteractive/hls.js/issues/3411)) ([a096bc1](https://github.com/cbsinteractive/hls.js/commit/a096bc1452d48c8cbcc250b960d7bd8f79f1a83a))
* Filter unsupported H.264 streams in Xbox ([#4493](https://github.com/cbsinteractive/hls.js/issues/4493)) ([914a08a](https://github.com/cbsinteractive/hls.js/commit/914a08a4d08bed284a072aed52b0bf8fcbdc6986))
* Fix ARIA label on replay button ([#3513](https://github.com/cbsinteractive/hls.js/issues/3513)) ([2dedd9f](https://github.com/cbsinteractive/hls.js/commit/2dedd9f3f5c10b4265c2264b4f6ea6573aeabc4f)), closes [#3512](https://github.com/cbsinteractive/hls.js/issues/3512)
* Fix audio language switching while using AirPlay ([#3472](https://github.com/cbsinteractive/hls.js/issues/3472)) ([f9c289e](https://github.com/cbsinteractive/hls.js/commit/f9c289efd1086417d33f515ef481113fe36ce662)), closes [#3125](https://github.com/cbsinteractive/hls.js/issues/3125)
* Fix audio mime type in multiplexed HLS stream ([#4241](https://github.com/cbsinteractive/hls.js/issues/4241)) ([4e4e92e](https://github.com/cbsinteractive/hls.js/commit/4e4e92e98da357285547859a98e6b3fe75d1904f))
* Fix bitmap-based cue size ([#4453](https://github.com/cbsinteractive/hls.js/issues/4453)) ([6329cf2](https://github.com/cbsinteractive/hls.js/commit/6329cf25b1a3265361e50386d48b0438e294536e))
* Fix broken deps file generation on Windows ([#4086](https://github.com/cbsinteractive/hls.js/issues/4086)) ([9660ce8](https://github.com/cbsinteractive/hls.js/commit/9660ce85df48856b964eebc330c28beba2e3068a)), closes [#4085](https://github.com/cbsinteractive/hls.js/issues/4085)
* Fix buffering due to re-fetch (SegmentIterator) ([#3419](https://github.com/cbsinteractive/hls.js/issues/3419)) ([9e6da5a](https://github.com/cbsinteractive/hls.js/commit/9e6da5a6e96234fa99b96e3931774781d11e2ac8))
* Fix buffering due to re-fetch (SegmentTemplate+duration) ([#3419](https://github.com/cbsinteractive/hls.js/issues/3419)) ([9dc4664](https://github.com/cbsinteractive/hls.js/commit/9dc466475a857041aa485ac7a804aae9de9c63c1))
* Fix buffering due to re-fetch (SegmentTimeline) ([3222370](https://github.com/cbsinteractive/hls.js/commit/3222370674d868d121ffec2e0a1fc4e978c2e005))
* Fix CC parsing of EPB and v1 TKHD boxes ([#3610](https://github.com/cbsinteractive/hls.js/issues/3610)) ([6a775e2](https://github.com/cbsinteractive/hls.js/commit/6a775e29a4c96588822288188d8e34ea4c992713)), closes [#3502](https://github.com/cbsinteractive/hls.js/issues/3502)
* Fix choosing tracks from streaming event ([#3459](https://github.com/cbsinteractive/hls.js/issues/3459)) ([760161f](https://github.com/cbsinteractive/hls.js/commit/760161f6ddf809da82c762956080fab7eb73f489)), closes [#3448](https://github.com/cbsinteractive/hls.js/issues/3448)
* Fix choppy HLS startup ([#4553](https://github.com/cbsinteractive/hls.js/issues/4553)) ([950ce69](https://github.com/cbsinteractive/hls.js/commit/950ce699a06bb9e7668b431f4f08052c005f2e8a)), closes [#4516](https://github.com/cbsinteractive/hls.js/issues/4516)
* Fix clearing buffer when requested for already-selected variant ([#3477](https://github.com/cbsinteractive/hls.js/issues/3477)) ([e85009d](https://github.com/cbsinteractive/hls.js/commit/e85009de325c9da803df90ed37f9ef9c70788fc8)), closes [#3450](https://github.com/cbsinteractive/hls.js/issues/3450)
* Fix CMCD property mangling ([#3842](https://github.com/cbsinteractive/hls.js/issues/3842)) ([fa5932c](https://github.com/cbsinteractive/hls.js/commit/fa5932ca8f604952590734bf8bdc27ad8e69e8d8)), closes [#3839](https://github.com/cbsinteractive/hls.js/issues/3839)
* Fix CMCD top bitrate reporting ([#3852](https://github.com/cbsinteractive/hls.js/issues/3852)) ([922778a](https://github.com/cbsinteractive/hls.js/commit/922778a5ebd2d58ca0c1e804745ca40cda1228bc)), closes [#3851](https://github.com/cbsinteractive/hls.js/issues/3851)
* Fix compilation error with strict constness ([6757d23](https://github.com/cbsinteractive/hls.js/commit/6757d238d0a0cd29b3933b31bf43c0f6adbf17ac))
* Fix compiler error introduced in [#3864](https://github.com/cbsinteractive/hls.js/issues/3864) ([#3906](https://github.com/cbsinteractive/hls.js/issues/3906)) ([0635e2c](https://github.com/cbsinteractive/hls.js/commit/0635e2c055c13a405048c7696389c1dfc039902f))
* Fix DASH transition from dynamic to static ([#3497](https://github.com/cbsinteractive/hls.js/issues/3497)) ([b3166db](https://github.com/cbsinteractive/hls.js/commit/b3166db4bc7cac968a03796bc9c2d7e598fb88c7)), closes [#3376](https://github.com/cbsinteractive/hls.js/issues/3376)
* Fix detection of ac4, dts, and dolby h265 ([#4657](https://github.com/cbsinteractive/hls.js/issues/4657)) ([9da2b47](https://github.com/cbsinteractive/hls.js/commit/9da2b47deba36f4c50fed10c859f46a432e20576))
* Fix download of some HLS assets ([#3934](https://github.com/cbsinteractive/hls.js/issues/3934)) ([36ca820](https://github.com/cbsinteractive/hls.js/commit/36ca820877965db8bcc8b9c4b2a428317301bb95))
* Fix DRM workaround for Tizen and Xbox with ac-3 boxes ([#3631](https://github.com/cbsinteractive/hls.js/issues/3631)) ([56a0042](https://github.com/cbsinteractive/hls.js/commit/56a004209ceb259794840bcba6a535ecd1c04c69)), closes [#3589](https://github.com/cbsinteractive/hls.js/issues/3589)
* Fix DRM workaround for Tizen and Xbox with avc3 boxes ([#3625](https://github.com/cbsinteractive/hls.js/issues/3625)) ([31b1ca9](https://github.com/cbsinteractive/hls.js/commit/31b1ca9f8104d3920f75b918a4f2fc6889f1e3bf))
* Fix drm.keySystemsMapping config ([#4425](https://github.com/cbsinteractive/hls.js/issues/4425)) ([40235ef](https://github.com/cbsinteractive/hls.js/commit/40235ef4f7675a853daf315d4c089ad7be7b2188)), closes [#4422](https://github.com/cbsinteractive/hls.js/issues/4422)
* Fix duplicate CMCD parameters in HLS live content ([#3875](https://github.com/cbsinteractive/hls.js/issues/3875)) ([f27401c](https://github.com/cbsinteractive/hls.js/commit/f27401cc151a435ae8fb12be4e86d672c331e1e5)), closes [#3862](https://github.com/cbsinteractive/hls.js/issues/3862)
* Fix EC-3 box support in DRM workaround on smart TVs ([#3427](https://github.com/cbsinteractive/hls.js/issues/3427)) ([87786f4](https://github.com/cbsinteractive/hls.js/commit/87786f4df6fd172dcc6cb996b947104f646d9af2))
* Fix encryption detection to work around broken platforms ([#4169](https://github.com/cbsinteractive/hls.js/issues/4169)) ([c5f474e](https://github.com/cbsinteractive/hls.js/commit/c5f474ef983169e6ff29f1594d15a9b50b12d316))
* Fix enforcement of cue alignment styles ([2250324](https://github.com/cbsinteractive/hls.js/commit/2250324a4acd039e3d86ce59178d476cadaa3aef)), closes [#3379](https://github.com/cbsinteractive/hls.js/issues/3379)
* Fix EOS set-top box being identified as Apple. ([#4310](https://github.com/cbsinteractive/hls.js/issues/4310)) ([7c2c4be](https://github.com/cbsinteractive/hls.js/commit/7c2c4be2ae946c4cf270717f852b0d95b498266e))
* Fix errors with TS segments on Chromecast ([#4543](https://github.com/cbsinteractive/hls.js/issues/4543)) ([8204db6](https://github.com/cbsinteractive/hls.js/commit/8204db6ebc152cb01c36db941ca60bc82ccbe443))
* Fix event listener leaks in Player ([#4229](https://github.com/cbsinteractive/hls.js/issues/4229)) ([a5d3568](https://github.com/cbsinteractive/hls.js/commit/a5d356874ba90069ca5a86be1979a5904a1150e8))
* Fix exception in StreamingEngine for EMSG with HLS ([#3887](https://github.com/cbsinteractive/hls.js/issues/3887)) ([48433ab](https://github.com/cbsinteractive/hls.js/commit/48433abe74c5f603cf06097e391ffdfa22d64256)), closes [#3886](https://github.com/cbsinteractive/hls.js/issues/3886)
* Fix exception with streaming.startAtSegmentBoundary ([#4216](https://github.com/cbsinteractive/hls.js/issues/4216)) ([426a19c](https://github.com/cbsinteractive/hls.js/commit/426a19c8e7ff188390e7430fb02f3cfcb79cc017)), closes [#4188](https://github.com/cbsinteractive/hls.js/issues/4188)
* Fix exceptions when quickly shutting down src= on Safari ([#4088](https://github.com/cbsinteractive/hls.js/issues/4088)) ([ca08230](https://github.com/cbsinteractive/hls.js/commit/ca08230fbe85d66176c7fa1fb4f9782d0ab364fc)), closes [#4087](https://github.com/cbsinteractive/hls.js/issues/4087)
* Fix failure with multiple thumbnails per period ([052e794](https://github.com/cbsinteractive/hls.js/commit/052e7943b191973776aeab899ac97a21b09dc819)), closes [#3383](https://github.com/cbsinteractive/hls.js/issues/3383)
* Fix filtering of duplicate image streams ([42674be](https://github.com/cbsinteractive/hls.js/commit/42674bee038eb1b0881dd7f0303944a043186103)), closes [#3383](https://github.com/cbsinteractive/hls.js/issues/3383)
* Fix getVideoPlaybackQuality in WebOS 3 ([#4316](https://github.com/cbsinteractive/hls.js/issues/4316)) ([5561111](https://github.com/cbsinteractive/hls.js/commit/556111143dfccbc7348fc15792df75bc35fea465))
* Fix hang when seeking to the last segment ([#4537](https://github.com/cbsinteractive/hls.js/issues/4537)) ([3d6c768](https://github.com/cbsinteractive/hls.js/commit/3d6c768cb302de42138aec8fdf51dff8317c5607))
* Fix HLS dynamic to static transition ([d9ecbf3](https://github.com/cbsinteractive/hls.js/commit/d9ecbf3fccb886e10a491c43e05e681fe2103a2d))
* Fix HLS dynamic to static transition ([#4483](https://github.com/cbsinteractive/hls.js/issues/4483)) ([d9ecbf3](https://github.com/cbsinteractive/hls.js/commit/d9ecbf3fccb886e10a491c43e05e681fe2103a2d)), closes [#4431](https://github.com/cbsinteractive/hls.js/issues/4431)
* Fix HLS live stream subtitle offsets ([#4586](https://github.com/cbsinteractive/hls.js/issues/4586)) ([ec0b4dc](https://github.com/cbsinteractive/hls.js/commit/ec0b4dcb0e288ceb1a01874db99063ef54fb3e47))
* Fix hung playback on rapid seek ([#3479](https://github.com/cbsinteractive/hls.js/issues/3479)) ([f7facc0](https://github.com/cbsinteractive/hls.js/commit/f7facc043ec983de10e9f90e56ccb33ff5176903)), closes [#3384](https://github.com/cbsinteractive/hls.js/issues/3384)
* Fix in-band key rotation on Xbox One ([#4478](https://github.com/cbsinteractive/hls.js/issues/4478)) ([bc0a588](https://github.com/cbsinteractive/hls.js/commit/bc0a588676828eb68bdca62efe52cb503feb947d)), closes [#4401](https://github.com/cbsinteractive/hls.js/issues/4401)
* Fix key ID byteswapping for PlayReady on PS4 ([#4377](https://github.com/cbsinteractive/hls.js/issues/4377)) ([25fd4f4](https://github.com/cbsinteractive/hls.js/commit/25fd4f4af6ddd8953c4bc2da4a2d9eb1144c3fb9))
* Fix mediaCapabilities polyfill on Chromecast ([de77787](https://github.com/cbsinteractive/hls.js/commit/de777872193d2ebf35559471ec72e9a87b0b8e6e))
* Fix MediaCapabilities polyfill on Playstation 4 ([#4320](https://github.com/cbsinteractive/hls.js/issues/4320)) ([0335b2a](https://github.com/cbsinteractive/hls.js/commit/0335b2af2efea6ceda83e536e12094e4cc942a25))
* Fix MediaCapabilities polyfill on Safari ([0201f2b](https://github.com/cbsinteractive/hls.js/commit/0201f2b7604e76062b68b8b1acbf098faf71d019)), closes [#3696](https://github.com/cbsinteractive/hls.js/issues/3696) [#3530](https://github.com/cbsinteractive/hls.js/issues/3530)
* Fix MediaCapabilities polyfill on Tizen and WebOS ([#4396](https://github.com/cbsinteractive/hls.js/issues/4396)) ([eb2aed8](https://github.com/cbsinteractive/hls.js/commit/eb2aed825e84142f9fb9ddb3e69ebc333127c295)), closes [#4383](https://github.com/cbsinteractive/hls.js/issues/4383) [#4357](https://github.com/cbsinteractive/hls.js/issues/4357)
* Fix memory leak in DASH live streams with inband EventStream ([#3957](https://github.com/cbsinteractive/hls.js/issues/3957)) ([b7f04cb](https://github.com/cbsinteractive/hls.js/commit/b7f04cb36bda664ec9cf23a081d237793907eaae))
* Fix misdetection of HEVC support on MS Edge ([#3897](https://github.com/cbsinteractive/hls.js/issues/3897)) ([dfb3699](https://github.com/cbsinteractive/hls.js/commit/dfb369935b9e84fe69a7d38c7904fb0e00dc064a)), closes [#3860](https://github.com/cbsinteractive/hls.js/issues/3860)
* Fix missing throughput in CMCD for HLS live ([#3874](https://github.com/cbsinteractive/hls.js/issues/3874)) ([df55944](https://github.com/cbsinteractive/hls.js/commit/df55944e8f49bdf8e34a679219cd6596ba46c777)), closes [#3873](https://github.com/cbsinteractive/hls.js/issues/3873)
* Fix multi-period DASH with descriptive audio ([#4629](https://github.com/cbsinteractive/hls.js/issues/4629)) ([0e70b87](https://github.com/cbsinteractive/hls.js/commit/0e70b874cf8558207b0620516c5608c6a201018d)), closes [#4500](https://github.com/cbsinteractive/hls.js/issues/4500)
* Fix multiperiod without consistent thumbnails ([ed1563f](https://github.com/cbsinteractive/hls.js/commit/ed1563f70df889fb1c57f45cd2ec01d579e565cf)), closes [#3383](https://github.com/cbsinteractive/hls.js/issues/3383)
* Fix new method missing from cast proxy ([0a62396](https://github.com/cbsinteractive/hls.js/commit/0a62396ae4f1470c2af76db8b9be488a0602e964)), closes [#3392](https://github.com/cbsinteractive/hls.js/issues/3392) [#3389](https://github.com/cbsinteractive/hls.js/issues/3389)
* Fix PERIOD_FLATTENING_FAILED error when periods have different base sample types ([#4206](https://github.com/cbsinteractive/hls.js/issues/4206)) ([b757a81](https://github.com/cbsinteractive/hls.js/commit/b757a81902a2159b217e7cb6a1445ab6d4d69bf4)), closes [#4202](https://github.com/cbsinteractive/hls.js/issues/4202)
* Fix playback failure due to rounding errors ([1cc99c1](https://github.com/cbsinteractive/hls.js/commit/1cc99c1241c89b5fb5a989dd52ff0b9a9753b65f)), closes [#3717](https://github.com/cbsinteractive/hls.js/issues/3717)
* Fix playRangeEnd for certain content ([#4068](https://github.com/cbsinteractive/hls.js/issues/4068)) ([5c81f3b](https://github.com/cbsinteractive/hls.js/commit/5c81f3bddb9e48431556f4d622364043fee4ea80)), closes [#4026](https://github.com/cbsinteractive/hls.js/issues/4026)
* Fix segment index assertions with DAI ([#4348](https://github.com/cbsinteractive/hls.js/issues/4348)) ([c2b3853](https://github.com/cbsinteractive/hls.js/commit/c2b3853a56e816c97fab57f961f295b7272e410e))
* fix support clear and encrypted periods ([#4606](https://github.com/cbsinteractive/hls.js/issues/4606)) ([8ece8ea](https://github.com/cbsinteractive/hls.js/commit/8ece8ea225fb8b9ec9027dacef0865cceb3fd93b))
* Fix support for TTAF1 namespace (old version of TTML) ([#3864](https://github.com/cbsinteractive/hls.js/issues/3864)) ([771619f](https://github.com/cbsinteractive/hls.js/commit/771619ff0ef8ba0e3da9569ded3894b428d03c58)), closes [#3009](https://github.com/cbsinteractive/hls.js/issues/3009)
* Fix TextDecoder fallback and browser support check ([#4403](https://github.com/cbsinteractive/hls.js/issues/4403)) ([04fc0d4](https://github.com/cbsinteractive/hls.js/commit/04fc0d47c3895f294401b588ed49cc4360f31be1))
* Fix thumbnail duration, expose start time and duration ([d4a1255](https://github.com/cbsinteractive/hls.js/commit/d4a1255235e174d8a0ca6ca3a8edb5b10db59405)), closes [#3517](https://github.com/cbsinteractive/hls.js/issues/3517)
* Fix thumbnail position calculation ([#3516](https://github.com/cbsinteractive/hls.js/issues/3516)) ([097c9a1](https://github.com/cbsinteractive/hls.js/commit/097c9a1cc4d17be4e583ceee185eab0ab7b02c97)), closes [#3511](https://github.com/cbsinteractive/hls.js/issues/3511)
* Fix UI captions icon state ([#4384](https://github.com/cbsinteractive/hls.js/issues/4384)) ([d462633](https://github.com/cbsinteractive/hls.js/commit/d46263333ba3de68707d521b997c40c5ba492fda)), closes [#4358](https://github.com/cbsinteractive/hls.js/issues/4358)
* Fix usage of Shaka without polyfills ([dfc44cb](https://github.com/cbsinteractive/hls.js/commit/dfc44cbca6b95eb137882075cb8bf02cfc73a9d3))
* Fix vanishing tracks while offline ([#4426](https://github.com/cbsinteractive/hls.js/issues/4426)) ([d668790](https://github.com/cbsinteractive/hls.js/commit/d668790f5b9eef990a190128bd11972204e98480)), closes [#4408](https://github.com/cbsinteractive/hls.js/issues/4408)
* Fix vp09 playback on webOS ([#3566](https://github.com/cbsinteractive/hls.js/issues/3566)) ([13aafcf](https://github.com/cbsinteractive/hls.js/commit/13aafcfd7e5016244b78bb3738d471ffb48193d4))
* Fix VP9 codec checks on Mac Firefox ([#4391](https://github.com/cbsinteractive/hls.js/issues/4391)) ([b6ab769](https://github.com/cbsinteractive/hls.js/commit/b6ab76976211852e96b2883562166a5e1e4dd0f2))
* Fix VTT cue timing in HLS ([#4217](https://github.com/cbsinteractive/hls.js/issues/4217)) ([5818260](https://github.com/cbsinteractive/hls.js/commit/58182605a7da3c18a7331828c319c88446a13d52)), closes [#4191](https://github.com/cbsinteractive/hls.js/issues/4191)
* Fixes bug in trick mode stream concatenation ([f091084](https://github.com/cbsinteractive/hls.js/commit/f0910842116157d71b10cd737d5f9f99354d5670)), closes [#3423](https://github.com/cbsinteractive/hls.js/issues/3423)
* Fixes updating of nested cues ([b02ff27](https://github.com/cbsinteractive/hls.js/commit/b02ff27017db362bb6562fdd2ac14cdf27005cb2)), closes [#3524](https://github.com/cbsinteractive/hls.js/issues/3524) [#3643](https://github.com/cbsinteractive/hls.js/issues/3643)
* focus on first element when back to the settings menu ([#4653](https://github.com/cbsinteractive/hls.js/issues/4653)) ([f507c89](https://github.com/cbsinteractive/hls.js/commit/f507c89bf63b0ec5b7802cd31ac3f3cca05ff237)), closes [#4652](https://github.com/cbsinteractive/hls.js/issues/4652)
* Force update captions when element resizes ([#3426](https://github.com/cbsinteractive/hls.js/issues/3426)) ([a09fa31](https://github.com/cbsinteractive/hls.js/commit/a09fa311888db5735b2f62b2d112a07058e73ffb))
* Force update captions with fullscreen ([#3414](https://github.com/cbsinteractive/hls.js/issues/3414)) ([b426fe8](https://github.com/cbsinteractive/hls.js/commit/b426fe87f8f00c54988a23bafe05c0e27898d776))
* Force using mcap polyfill on EOS browsers ([#4630](https://github.com/cbsinteractive/hls.js/issues/4630)) ([6b9f806](https://github.com/cbsinteractive/hls.js/commit/6b9f806df54cc7b8761ef1683cefe5ed8d576a03))
* **hls:** Fix AV sync issues, fallback to sequence numbers if PROGRAM-DATE-TIME ignored ([#4289](https://github.com/cbsinteractive/hls.js/issues/4289)) ([314a987](https://github.com/cbsinteractive/hls.js/commit/314a987ecf85b47cc8a6cef08f390ef817e11c49)), closes [#4287](https://github.com/cbsinteractive/hls.js/issues/4287)
* **hls:** Fix av1 codec selection in HLS. ([#4203](https://github.com/cbsinteractive/hls.js/issues/4203)) ([5e13495](https://github.com/cbsinteractive/hls.js/commit/5e1349570d64c17e6ca1fcdc5ffde1076ea9a999))
* **HLS:** Fix detection of WebVTT subtitles in HLS by extension ([#4663](https://github.com/cbsinteractive/hls.js/issues/4663)) ([731bd96](https://github.com/cbsinteractive/hls.js/commit/731bd96644cbbd3fa39992fd62a4ae6de8389e74))
* **HLS:** Fix duplicate hinted segments ([#4258](https://github.com/cbsinteractive/hls.js/issues/4258)) ([9171f73](https://github.com/cbsinteractive/hls.js/commit/9171f733e8de0b811ebac71d5ddbe0cb1ff7c75b)), closes [#4223](https://github.com/cbsinteractive/hls.js/issues/4223)
* **hls:** Fix raw format detection when the main playlist hasn't type ([#4583](https://github.com/cbsinteractive/hls.js/issues/4583)) ([4053088](https://github.com/cbsinteractive/hls.js/commit/4053088847eff6d7ddb7a969701fa881f6e90e8a))
* **hls:** Fix X-PRELOAD-HINT failure with LL mode off ([#4212](https://github.com/cbsinteractive/hls.js/issues/4212)) ([86497a5](https://github.com/cbsinteractive/hls.js/commit/86497a5089e272ed682f017f5ed9135108be5a65)), closes [#4185](https://github.com/cbsinteractive/hls.js/issues/4185)
* **hls:** Fixed buffering issue with live HLS ([#4002](https://github.com/cbsinteractive/hls.js/issues/4002)) ([c438e85](https://github.com/cbsinteractive/hls.js/commit/c438e857f2f122eb45899148e067d68ffec3477c))
* **hls:** Fixes parsing of HLS 'DEFAULT' attribute ([#3771](https://github.com/cbsinteractive/hls.js/issues/3771)) ([3e7a5b5](https://github.com/cbsinteractive/hls.js/commit/3e7a5b5f872011b575e14f8a68d21af0a88e822b)), closes [#3769](https://github.com/cbsinteractive/hls.js/issues/3769)
* **HLS:** Infer missing codecs from config ([#4656](https://github.com/cbsinteractive/hls.js/issues/4656)) ([507d96e](https://github.com/cbsinteractive/hls.js/commit/507d96e74239973fb904d6ade4615ac8888a9d57))
* **hls:** Made HLS notify segments after fit ([1e598ba](https://github.com/cbsinteractive/hls.js/commit/1e598bab652dbca32aae49f43f5354d5788e1698)), closes [#3733](https://github.com/cbsinteractive/hls.js/issues/3733)
* **hls:** Made HLS notify segments after fit ([9220c1f](https://github.com/cbsinteractive/hls.js/commit/9220c1f87d3ab1b23d0008fc8b0164d2ad26f35f)), closes [#3733](https://github.com/cbsinteractive/hls.js/issues/3733)
* **HLS:** Prioritize AVERAGE-BANDWIDTH over BANDWIDTH ([#3428](https://github.com/cbsinteractive/hls.js/issues/3428)) ([76480f9](https://github.com/cbsinteractive/hls.js/commit/76480f9746eced28718c5d78ee3c938b640282e6))
* **HLS:** skip whitespace in attributes ([#3884](https://github.com/cbsinteractive/hls.js/issues/3884)) ([ea6c02a](https://github.com/cbsinteractive/hls.js/commit/ea6c02aece1510598a898c235e66335d20eabedb))
* **hls:** Support playing media playlists directly ([#4080](https://github.com/cbsinteractive/hls.js/issues/4080)) ([48dd205](https://github.com/cbsinteractive/hls.js/commit/48dd20562c2226f61cc753a922629e44c1866f6d)), closes [#3536](https://github.com/cbsinteractive/hls.js/issues/3536)
* **image:** Fix HLS image track issues ([264c842](https://github.com/cbsinteractive/hls.js/commit/264c84249684ee809f53fd4117f9aab4e0a599ac)), closes [#3840](https://github.com/cbsinteractive/hls.js/issues/3840)
* **image:** Fix thumbnails issues ([#3858](https://github.com/cbsinteractive/hls.js/issues/3858)) ([087a9b4](https://github.com/cbsinteractive/hls.js/commit/087a9b489b030aa0dc80011ca4e0a0c7a4124ecd))
* Limit key ids to 32 characters ([#4614](https://github.com/cbsinteractive/hls.js/issues/4614)) ([6fc1455](https://github.com/cbsinteractive/hls.js/commit/6fc145584ffc0798a6e97c5672409b1e1613f164))
* **LL-DASH:** Append segment chunk strictly in order ([#3405](https://github.com/cbsinteractive/hls.js/issues/3405)) ([f09616f](https://github.com/cbsinteractive/hls.js/commit/f09616fb41941d58d42d3037807f1c5c785accbc)), closes [#3404](https://github.com/cbsinteractive/hls.js/issues/3404)
* **LL-DASH:** Fix index out of bound issue when parsing mp4 segment ([#3403](https://github.com/cbsinteractive/hls.js/issues/3403)) ([e02d28c](https://github.com/cbsinteractive/hls.js/commit/e02d28c7656e2fc7183c9a1b4a004c721306c97e)), closes [#3402](https://github.com/cbsinteractive/hls.js/issues/3402)
* Load image streams for offline multiperiod ([4f4f6b1](https://github.com/cbsinteractive/hls.js/commit/4f4f6b1cf3025983dde05866a02238e180d71465)), closes [#3383](https://github.com/cbsinteractive/hls.js/issues/3383)
* Make ARIA polyfill more robust ([b185b3c](https://github.com/cbsinteractive/hls.js/commit/b185b3c9eab0d9a033b973dcdd6d855d342bfe86))
* Make XML parsing secure ([#4598](https://github.com/cbsinteractive/hls.js/issues/4598)) ([2e45696](https://github.com/cbsinteractive/hls.js/commit/2e45696c10f3c2199a372a7a5f311579e627cd8e))
* Missing AES-128 key of last HLS segment ([#4519](https://github.com/cbsinteractive/hls.js/issues/4519)) ([2c2677f](https://github.com/cbsinteractive/hls.js/commit/2c2677fe7af10e1280ea8253b90ef6527bdcbbc0)), closes [#4517](https://github.com/cbsinteractive/hls.js/issues/4517)
* New EME polyfill fixes EME/MCap issues on some smart TVs ([#4279](https://github.com/cbsinteractive/hls.js/issues/4279)) ([db1b20e](https://github.com/cbsinteractive/hls.js/commit/db1b20ec77f74472dd24f493f2a26c02b17927bc))
* **offline:** Add storage muxer init timeout ([#4566](https://github.com/cbsinteractive/hls.js/issues/4566)) ([6022907](https://github.com/cbsinteractive/hls.js/commit/6022907df5e3a18b552a49e537d2c1daeebbc2c6))
* **offline:** Clean up orphaned segments on abort ([#4177](https://github.com/cbsinteractive/hls.js/issues/4177)) ([c07447f](https://github.com/cbsinteractive/hls.js/commit/c07447f00e9095020890366695561b71b045e55a))
* **offline:** Do not apply CMCD query args to offline URIs ([#3716](https://github.com/cbsinteractive/hls.js/issues/3716)) ([173ae42](https://github.com/cbsinteractive/hls.js/commit/173ae42cdde973f6cb8a96a5e62057ddacd2a823)), closes [#3712](https://github.com/cbsinteractive/hls.js/issues/3712)
* **offline:** Fix error when un-storing DRM asset ([23e0d76](https://github.com/cbsinteractive/hls.js/commit/23e0d764a0ab58645d7e5fc953f524a49126920e)), closes [#3534](https://github.com/cbsinteractive/hls.js/issues/3534)
* **offline:** Speed up offline storage by ~87% ([#4176](https://github.com/cbsinteractive/hls.js/issues/4176)) ([c1c9613](https://github.com/cbsinteractive/hls.js/commit/c1c96135120480afc9615713812eecc4a51f153b)), closes [#4166](https://github.com/cbsinteractive/hls.js/issues/4166)
* **performance:** Eliminate use of ES6 generators ([#4092](https://github.com/cbsinteractive/hls.js/issues/4092)) ([57c7324](https://github.com/cbsinteractive/hls.js/commit/57c73241a0e8ce1615f7b3aca4c3ad8f69b7e8c2)), closes [#4062](https://github.com/cbsinteractive/hls.js/issues/4062)
* **playhead:** Safeguard getStallsDetected as stallDetector can be null ([#4581](https://github.com/cbsinteractive/hls.js/issues/4581)) ([c4ee14f](https://github.com/cbsinteractive/hls.js/commit/c4ee14f2abcdd83b21e64230b67ab121c1db037e))
* Populate track's spatialAudio property ([#4291](https://github.com/cbsinteractive/hls.js/issues/4291)) ([713f461](https://github.com/cbsinteractive/hls.js/commit/713f461c62b23680557f8d6c4b9c3126bb604f9e))
* Rearrange checking & also check second period ([51f6c10](https://github.com/cbsinteractive/hls.js/commit/51f6c10b02c0466eb91cf28cf75f58826a1edb75))
* Remove IE 11 from default browsers for Windows ([#4272](https://github.com/cbsinteractive/hls.js/issues/4272)) ([490b06c](https://github.com/cbsinteractive/hls.js/commit/490b06cd45d09c7567056535f4b8dc6f3e2e5733)), closes [#4271](https://github.com/cbsinteractive/hls.js/issues/4271)
* Reset forced subs between loads ([e9dc36d](https://github.com/cbsinteractive/hls.js/commit/e9dc36d13dbfb7cb8f3d98063a19059f343863a1))
* Resolve load failures for TS-based content on Android-based Cast devices ([#4569](https://github.com/cbsinteractive/hls.js/issues/4569)). ([#4570](https://github.com/cbsinteractive/hls.js/issues/4570)) ([4a4f48d](https://github.com/cbsinteractive/hls.js/commit/4a4f48d2cac726e2a5a1d4e51e89f0b854e281ef))
* Respect existing app usage of Cast SDK ([#4523](https://github.com/cbsinteractive/hls.js/issues/4523)) ([3db2568](https://github.com/cbsinteractive/hls.js/commit/3db2568508cfc827fd9efc644096a45220eb617b)), closes [#4521](https://github.com/cbsinteractive/hls.js/issues/4521)
* return width and height in the stats when we are using src= ([#4435](https://github.com/cbsinteractive/hls.js/issues/4435)) ([aad8769](https://github.com/cbsinteractive/hls.js/commit/aad8769807bcf58b2bc5c6298e9a10f428c73806))
* Revert "Add missing module export in generated typescript defs" ([#4175](https://github.com/cbsinteractive/hls.js/issues/4175)) ([fe4f5c6](https://github.com/cbsinteractive/hls.js/commit/fe4f5c6e19214d6cf4d42da9430de03040532bab)), closes [#4167](https://github.com/cbsinteractive/hls.js/issues/4167)
* Select first of identical audio streams ([#3869](https://github.com/cbsinteractive/hls.js/issues/3869)) ([a6d8610](https://github.com/cbsinteractive/hls.js/commit/a6d8610241dc7c8abd56cf7f0d48993d6139dcae))
* Show captions with rapid seek when ignoreTextStreamFailures is true ([#3476](https://github.com/cbsinteractive/hls.js/issues/3476)) ([8aa3e9d](https://github.com/cbsinteractive/hls.js/commit/8aa3e9da702c0ccfcf6ef6f0ac522e5efc780fa4))
* Support multiple chapter tracks with same language ([#3868](https://github.com/cbsinteractive/hls.js/issues/3868)) ([8c626ae](https://github.com/cbsinteractive/hls.js/commit/8c626aec238c01ebad7ccd06c9313e4f2e99d383)), closes [#3597](https://github.com/cbsinteractive/hls.js/issues/3597)
* **text:** Allow comments in the TTML parser ([#3827](https://github.com/cbsinteractive/hls.js/issues/3827)) ([c5a81f5](https://github.com/cbsinteractive/hls.js/commit/c5a81f53fe8d7b523523c0d1ed5431542383c80d)), closes [#3766](https://github.com/cbsinteractive/hls.js/issues/3766)
* **text:** Fix caption overlap. ([bf67d87](https://github.com/cbsinteractive/hls.js/commit/bf67d87387b1dfc4d3d8e0661bfe4efb1e4083b2)), closes [#3850](https://github.com/cbsinteractive/hls.js/issues/3850) [#3741](https://github.com/cbsinteractive/hls.js/issues/3741)
* **text:** Fix cue region rendering in UI ([#4412](https://github.com/cbsinteractive/hls.js/issues/4412)) ([b1f46db](https://github.com/cbsinteractive/hls.js/commit/b1f46dbc3a685b0216600835e24fd13c504e1b62)), closes [#4381](https://github.com/cbsinteractive/hls.js/issues/4381)
* **text:** Fix timestamp offset of CEA-608 cues ([b6d7138](https://github.com/cbsinteractive/hls.js/commit/b6d71384660952a79a0cf0d41f9ad2898a03eb02)), closes [#3782](https://github.com/cbsinteractive/hls.js/issues/3782)
* **text:** Fix TTML render timing and line break issues ([#4407](https://github.com/cbsinteractive/hls.js/issues/4407)) ([122f223](https://github.com/cbsinteractive/hls.js/commit/122f223d19732bf5977ab8a5c93bbc4d934da1d7)), closes [#4381](https://github.com/cbsinteractive/hls.js/issues/4381)
* **text:** Fix UI test failures ([7da2cd5](https://github.com/cbsinteractive/hls.js/commit/7da2cd59ff7c9a019c13d23f6e73af1c065ed4d3)), closes [#3689](https://github.com/cbsinteractive/hls.js/issues/3689)
* **text:** Fix webvtt offset in sequence mode ([#3955](https://github.com/cbsinteractive/hls.js/issues/3955)) ([a4e9267](https://github.com/cbsinteractive/hls.js/commit/a4e926772e1b754fe968ee6f97490f08a40fe535)), closes [#2337](https://github.com/cbsinteractive/hls.js/issues/2337)
* **text:** Fixes minor bug with cue updating ([a4e348d](https://github.com/cbsinteractive/hls.js/commit/a4e348da7bf9d42276c05f35ed75c3ac5ec3ce23))
* **text:** Force caption update when removing cues ([4bdd3bb](https://github.com/cbsinteractive/hls.js/commit/4bdd3bb65a62df3ca91dc340cac5b5d699b56b9c))
* **text:** Inherit alignment from regions. ([e9df8fb](https://github.com/cbsinteractive/hls.js/commit/e9df8fb10c3752cb833e89c8ac793241497e29b6))
* **text:** Made nested cues inherit region ([#3837](https://github.com/cbsinteractive/hls.js/issues/3837)) ([3ff48cb](https://github.com/cbsinteractive/hls.js/commit/3ff48cba9b28a29e8decc11898e326d7918bc8f4)), closes [#3743](https://github.com/cbsinteractive/hls.js/issues/3743)
* **text:** Remove caption wrapper bgColor ([#3838](https://github.com/cbsinteractive/hls.js/issues/3838)) ([0117441](https://github.com/cbsinteractive/hls.js/commit/0117441bb06e0325b84666d2a5a76c0c2de81725)), closes [#3745](https://github.com/cbsinteractive/hls.js/issues/3745)
* **text:** support stpp.ttml codec in Mp4TtmlParser ([#3754](https://github.com/cbsinteractive/hls.js/issues/3754)) ([9e5b9ac](https://github.com/cbsinteractive/hls.js/commit/9e5b9ac1399e6a2772c7405de20f786ee1504331))
* Tolerate misaligned TS files ([20f3cb0](https://github.com/cbsinteractive/hls.js/commit/20f3cb0bc33a8933e51c304ffe623a38c16406f1)), closes [#3580](https://github.com/cbsinteractive/hls.js/issues/3580)
* **ttml:** Center subtitles by default ([#4023](https://github.com/cbsinteractive/hls.js/issues/4023)) ([f2f24d5](https://github.com/cbsinteractive/hls.js/commit/f2f24d528f71e59c81d6172c24da2f412ca18d70))
* **ttml:** Default TTML background color to transparent if unspecified ([#4496](https://github.com/cbsinteractive/hls.js/issues/4496)) ([0b5c985](https://github.com/cbsinteractive/hls.js/commit/0b5c9853a6a39cb24ab1270598bf34d2ac1eacf0)), closes [#4468](https://github.com/cbsinteractive/hls.js/issues/4468)
* **ttml:** Fix ttml erroneously dismissing cues. ([157bd77](https://github.com/cbsinteractive/hls.js/commit/157bd77be25ea7744d2d905f46dd3ee3eb1a611a)), closes [#3643](https://github.com/cbsinteractive/hls.js/issues/3643)
* Typings & remove unrelated tests ([e248db4](https://github.com/cbsinteractive/hls.js/commit/e248db408821568b73d62abfa58ea525b2f41ac1))
* **UI:** Ad position and ad counter are too close to each other ([#4416](https://github.com/cbsinteractive/hls.js/issues/4416)) ([a7333a5](https://github.com/cbsinteractive/hls.js/commit/a7333a560aae4c8f915b3546ecc4e34dc501c5f2))
* **UI:** Add cursor pointer to range elements ([#4059](https://github.com/cbsinteractive/hls.js/issues/4059)) ([33e8400](https://github.com/cbsinteractive/hls.js/commit/33e84009dc9f6d48884ecfc2f66eeb285f60d05a)), closes [#3220](https://github.com/cbsinteractive/hls.js/issues/3220)
* **ui:** Control panel alignment ([#3650](https://github.com/cbsinteractive/hls.js/issues/3650)) ([c55ce6c](https://github.com/cbsinteractive/hls.js/commit/c55ce6c11b655f53f3354e7ce67a9c88e1c9bce2))
* **ui:** Fix exception on screen rotation if fullscreen is not supported ([#4669](https://github.com/cbsinteractive/hls.js/issues/4669)) ([6c54db9](https://github.com/cbsinteractive/hls.js/commit/6c54db91e03c4ff4a2c073b45dcb05e8591295d0))
* **ui:** Fix Russian translation ([#3751](https://github.com/cbsinteractive/hls.js/issues/3751)) ([3092063](https://github.com/cbsinteractive/hls.js/commit/3092063479f54dd21e2f86dfd27e013ffa69a87c))
* **ui:** Fix styling of UI text cues ([cdeffbb](https://github.com/cbsinteractive/hls.js/commit/cdeffbb9e6afcc68cb2165bcc0c99be20c9cb153)), closes [#3521](https://github.com/cbsinteractive/hls.js/issues/3521) [#3600](https://github.com/cbsinteractive/hls.js/issues/3600) [#3713](https://github.com/cbsinteractive/hls.js/issues/3713)
* **UI:** Fix text UI not updating when text is disabled ([#3867](https://github.com/cbsinteractive/hls.js/issues/3867)) ([9f53d39](https://github.com/cbsinteractive/hls.js/commit/9f53d394279066f29a2d391b6964cba11c4a3e1e)), closes [#3728](https://github.com/cbsinteractive/hls.js/issues/3728)
* **UI:** Fix time element height on Safari ([#3809](https://github.com/cbsinteractive/hls.js/issues/3809)) ([680ab22](https://github.com/cbsinteractive/hls.js/commit/680ab22acaaf58e870d922bff054f5d524eee875)), closes [#3739](https://github.com/cbsinteractive/hls.js/issues/3739)
* **UI:** Stop using setAttribute for ARIA ([#3489](https://github.com/cbsinteractive/hls.js/issues/3489)) ([3b2f7db](https://github.com/cbsinteractive/hls.js/commit/3b2f7dba042f62250dddf9a67dfb7d83da86c631))
* **UI:** Update Play icon after seeking from end ([#3515](https://github.com/cbsinteractive/hls.js/issues/3515)) ([8b418bb](https://github.com/cbsinteractive/hls.js/commit/8b418bb13c71a71486bcc6749226266cb76abd37))
* **ui:** Widen touchable button area ([#3249](https://github.com/cbsinteractive/hls.js/issues/3249)) ([6c0283e](https://github.com/cbsinteractive/hls.js/commit/6c0283e7d040fd0df9383454b174a7ceb2678c89))
* Update Cast receiver ID for v3.2 ([1b2fa84](https://github.com/cbsinteractive/hls.js/commit/1b2fa840d9b383d659fe515c1ec27a23414447cc))
* Update main branch Cast receiver ID ([#4364](https://github.com/cbsinteractive/hls.js/issues/4364)) ([46b27f1](https://github.com/cbsinteractive/hls.js/commit/46b27f19e099d44ab3929222da7a3bcb41bdb230))
* Update v4.2 receiver app ID ([56466dc](https://github.com/cbsinteractive/hls.js/commit/56466dce484e5ced69eddeb0c62c68615f4ed8d3))
* Use "undetermined" for missing CC language ([3cc9ec5](https://github.com/cbsinteractive/hls.js/commit/3cc9ec50b42e5939ddcdc2f6f650076fd979960e))
* Use middle segment when guessing MIME type on HLS ([#4269](https://github.com/cbsinteractive/hls.js/issues/4269)) ([#4270](https://github.com/cbsinteractive/hls.js/issues/4270)) ([3d27d2a](https://github.com/cbsinteractive/hls.js/commit/3d27d2a2cfeb8fa21f3415baaf013567dcccf480))
* Use period ID instead of start time ([84f4578](https://github.com/cbsinteractive/hls.js/commit/84f45780aa5487b172d8eefe602f758fd76408a1))
* VTT Cue Parsing On PlayStation 4 ([#4340](https://github.com/cbsinteractive/hls.js/issues/4340)) ([b5da41e](https://github.com/cbsinteractive/hls.js/commit/b5da41ed80b96e8edae970c39dd5fac7348a9a55)), closes [#4321](https://github.com/cbsinteractive/hls.js/issues/4321)
* Wait for chapters track to be loaded ([#4228](https://github.com/cbsinteractive/hls.js/issues/4228)) ([80e81f1](https://github.com/cbsinteractive/hls.js/commit/80e81f139129dbe1c797ee07fedc1217b8790b53)), closes [#4186](https://github.com/cbsinteractive/hls.js/issues/4186)
* Work around override of MediaCapabilities polyfill in Apple browsers ([#3668](https://github.com/cbsinteractive/hls.js/issues/3668)) ([31c0cd4](https://github.com/cbsinteractive/hls.js/commit/31c0cd4b8ca0daec1cd7760bffe2bd5376a7f5ab)), closes [#3530](https://github.com/cbsinteractive/hls.js/issues/3530)

---
This PR was generated with [Release Please](https://github.com/googleapis/release-please). See [documentation](https://github.com/googleapis/release-please#release-please).